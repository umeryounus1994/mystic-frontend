<!-- Admin/SubAdmin Sidebar -->
<nav class="navbar sidebar navbar-expand-xl navbar-dark bg-dark" *ngIf="auth.isAdmin || auth.isSubAdmin || auth.isPartner || auth.isFamily">

  <div class="offcanvas offcanvas-start custom-scrollbar" style="height: 100vh; overflow-y: auto; margin-top: 0;" data-bs-backdrop="true" tabindex="-1" id="offcanvasSidebar">
    <div class="offcanvas-body sidebar-content d-flex flex-column bg-dark custom-scrollbar">
      <ul class="navbar-nav flex-column" id="navbar-sidebar">
        
        <!-- Dashboard Section Header -->
        <li class="nav-item ms-2 my-2 mt-3" *ngIf="auth.isPartner || auth.isAdmin || auth.isFamily">
          <i class="bi bi-grid-3x3-gap me-2"></i>Dashboard
        </li>
        
        <!-- Admin Dashboard (for admin only) -->
        <li class="nav-item" *ngIf="auth.isAdmin">
          <a [routerLink]="['/dashboard/admin']" class="nav-link" [class.active]="routeURL === '/dashboard/admin'">
            <i class="bi bi-house fa-fw me-2"></i>Admin Dashboard
          </a>
        </li>
        
        <!-- Partner Dashboard -->
        <li class="nav-item" *ngIf="auth.isPartner">
          <a [routerLink]="['/dashboard/partner']" class="nav-link" [class.active]="routeURL === '/dashboard/partner'">
            <i class="bi bi-speedometer2 fa-fw me-2"></i>Partner Dashboard
          </a>
        </li>
        <li class="nav-item" *ngIf="auth.isFamily">
          <a [routerLink]="['/dashboard/family']" class="nav-link" [class.active]="routeURL === '/dashboard/family'">
            <i class="bi bi-speedometer2 fa-fw me-2"></i>Family Dashboard
          </a>
        </li>

        <li class="nav-item ms-2 my-2">Content Management</li>

        <!-- Quests -->
        <li class="nav-item" *ngIf="auth.isAdmin || auth.user?.permissions?.includes('Quest')">
          <a class="nav-link" data-bs-toggle="collapse" href="#collapsequest" role="button" aria-expanded="false" aria-controls="collapsequest">
            <i class="bi bi-puzzle fa-fw me-2"></i>Quests
          </a>
          <ul class="nav collapse flex-column" id="collapsequest" data-bs-parent="#navbar-sidebar">
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/quest/list-quest'" [routerLink]="['/quest/list-quest']">All Quests</a></li>
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/quest/create-quest'" [routerLink]="['/quest/create-quest']">Create Quest</a></li>
          </ul>
        </li>

        <!-- Missions -->
        <li class="nav-item" *ngIf="auth.isAdmin || auth.user?.permissions?.includes('Missions')">
          <a class="nav-link" data-bs-toggle="collapse" href="#collapsemissions" role="button" aria-expanded="false" aria-controls="collapsemissions">
            <i class="bi bi-bullseye fa-fw me-2"></i>Missions
          </a>
          <ul class="nav collapse flex-column" id="collapsemissions" data-bs-parent="#navbar-sidebar">
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/mission/list-mission'" [routerLink]="['/mission/list-mission']">All Mission</a></li>
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/mission/create-mission'" [routerLink]="['/mission/create-mission']">Create Mission</a></li>
          </ul>
        </li>

        <!-- Treasure Hunts -->
        <li class="nav-item" *ngIf="auth.isAdmin || auth.user?.permissions?.includes('Hunts')">
          <a class="nav-link" data-bs-toggle="collapse" href="#collapsehunts" role="button" aria-expanded="false" aria-controls="collapsehunts">
            <i class="bi bi-gem fa-fw me-2"></i>Treasure Hunts
          </a>
          <ul class="nav collapse flex-column" id="collapsehunts" data-bs-parent="#navbar-sidebar">
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/hunt/list-hunt'" [routerLink]="['/hunt/list-hunt']">All Treasure Hunt</a></li>
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/hunt/create-hunt'" [routerLink]="['/hunt/create-hunt']">Create Treasure Hunt</a></li>
          </ul>
        </li>

        <!-- Picture Mysteries -->
        <li class="nav-item" *ngIf="auth.isAdmin || auth.user?.permissions?.includes('Picture Mysteries')">
          <a class="nav-link" data-bs-toggle="collapse" href="#collapsemysteries" role="button" aria-expanded="false" aria-controls="collapsemysteries">
            <i class="bi bi-camera fa-fw me-2"></i>Picture Mysteries
          </a>
          <ul class="nav collapse flex-column" id="collapsemysteries" data-bs-parent="#navbar-sidebar">
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/mystery/list-mystery'" [routerLink]="['/mystery/list-mystery']">All Picture Mysteries</a></li>
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/mystery/add-mystery'" [routerLink]="['/mystery/add-mystery']">Add Mystery</a></li>
          </ul>
        </li>

        <li class="nav-item" *ngIf="auth.isPartner || auth.isAdmin || auth.isFamily">
          <a class="nav-link" data-bs-toggle="collapse" href="#collapseactivity" role="button" aria-expanded="false" aria-controls="collapseactivity">
            <i class="bi bi-calendar-event fa-fw me-2"></i>Activities
          </a>
          <ul class="nav collapse flex-column" id="collapseactivity" data-bs-parent="#navbar-sidebar">
            <li class="nav-item" *ngIf="auth.isPartner || auth.isAdmin"><a class="nav-link" [class.active]="routeURL === '/partner/list-activities'" [routerLink]="['/partner/list-activities']">All Activities</a></li>
            <li class="nav-item" *ngIf="auth.isPartner"><a class="nav-link" [class.active]="routeURL === '/partner/create-activity'" [routerLink]="['/partner/create-activity']">Create Activity</a></li>
            <li class="nav-item" *ngIf="auth.isFamily"><a class="nav-link" [class.active]="routeURL === '/partner/search-activities'" [routerLink]="['/partner/search-activities']">Browse Activities</a></li>
          </ul>
        </li>
        <li class="nav-item" *ngIf="auth.isPartner || auth.isAdmin || auth.isFamily">
          <a class="nav-link" data-bs-toggle="collapse" href="#collapsebookings" role="button" aria-expanded="false" aria-controls="collapsebookings">
            <i class="bi bi-calendar-event fa-fw me-2"></i>Bookings
          </a>
          <ul class="nav collapse flex-column" id="collapsebookings" data-bs-parent="#navbar-sidebar">
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/bookings/list-bookings'" [routerLink]="['/bookings/list-bookings']">All Bookings</a></li>
          </ul>
        </li>

        <!-- Section: Management -->
        <li class="nav-item ms-2 my-2" *ngIf="auth.isAdmin">Management</li>

        <!-- User Management (Admin Only) -->
        <li class="nav-item" *ngIf="auth.isAdmin">
          <a class="nav-link" data-bs-toggle="collapse" href="#collapsemanagement" role="button" aria-expanded="false" aria-controls="collapsemanagement">
            <i class="bi bi-people fa-fw me-2"></i>Users
          </a>
          <ul class="nav collapse flex-column" id="collapsemanagement" data-bs-parent="#navbar-sidebar">
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/management/list-user'" [routerLink]="['/management/list-user']">All Users</a></li>
          </ul>
        </li>

        <!-- Drops -->
        <li class="nav-item" *ngIf="auth.isAdmin || auth.user?.permissions?.includes('Drops')">
          <a class="nav-link" data-bs-toggle="collapse" href="#collapsedrops" role="button" aria-expanded="false" aria-controls="collapsedrops">
            <i class="bi bi-box fa-fw me-2"></i>Drops
          </a>
          <ul class="nav collapse flex-column" id="collapsedrops" data-bs-parent="#navbar-sidebar">
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/management/list-drop'" [routerLink]="['/management/list-drop']">All Drops</a></li>
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/management/add-drop'" [routerLink]="['/management/add-drop']">Add Drop</a></li>
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/management/list-rewards'" [routerLink]="['/management/list-rewards']">Drop Rewards</a></li>
          </ul>
        </li>

        <!-- Sky Dropped Gifts -->
        <li class="nav-item" *ngIf="auth.isAdmin || auth.user?.permissions?.includes('Drops')">
          <a class="nav-link" data-bs-toggle="collapse" href="#collapseskygifts" role="button" aria-expanded="false" aria-controls="collapseskygifts">
            <i class="bi bi-gift fa-fw me-2"></i>Sky Dropped Gifts
          </a>
          <ul class="nav collapse flex-column" id="collapseskygifts" data-bs-parent="#navbar-sidebar">
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/skygifts/list-skygifts'" [routerLink]="['/skygifts/list-skygifts']">All Gifts</a></li>
            <li class="nav-item"><a class="nav-link" [class.active]="routeURL === '/skygifts/add-skygifts'" [routerLink]="['/skygifts/add-skygifts']">Add Gifts</a></li>
          </ul>
        </li>

        <!-- Mythicas (Admin Only) -->
        <li class="nav-item" *ngIf="auth.isAdmin">
          <a [routerLink]="['/management/mythicas']" class="nav-link" [class.active]="routeURL === '/management/mythicas'">
            <i class="bi bi-star fa-fw me-2"></i>Mythicas
          </a>
        </li>

      </ul>
    </div>
  </div>
</nav>

<!-- Family/Partner - No Sidebar, Hide Everything -->
<div *ngIf="auth.isFamily || auth.isPartner" class="d-none">
  <!-- Hidden content for family/partner users -->
</div>
